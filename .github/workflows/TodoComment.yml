name: Create issues from todos

on:
  push:
    branches:
      - develop

jobs:
  todos:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
      - name: todo-actions
        uses: dtinth/todo-actions@master
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          TODO_ACTIONS_MONGO_URL: ${{ secrets.TODO_ACTIONS_MONGO_URL }}

      - name: Find issues
        id: find-issues
        uses: actions-cool/issues-helper@v3
        with:
          actions: 'find-issues'
          token: ${{ secrets.GITHUB_TOKEN }}
          issue-state: 'open'

      - name: Print issues
        run: |
            echo ${{ steps.find-issues.outputs.issues }}
            echo ${{ steps.find-issues.outputs.issues.length }}
